<!DOCTYPE html>
<html lang="zh-CN">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="https://jsd.cdn.zzko.cn/gh/imbalaomao/picx-images-hosting@master/touxiang.4aye9nuxxos0.webp">
  
  <title>【技巧】利用ffmpeg/Streamlink+Artplayer做拉流中转 | 猫 の 窝</title>
  
  <meta name="author" content="OldcatY" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="FluidPlayer, ffmpeg, streamlink, vps, 服务器" />
  
  <meta name="description" content="最好还是用国内服务器拉一次，直连国外到底还是不太行">
<meta property="og:type" content="article">
<meta property="og:title" content="【技巧】利用ffmpeg&#x2F;Streamlink+Artplayer做拉流中转">
<meta property="og:url" content="https://nekoss.top/posts/31992/">
<meta property="og:site_name" content="猫 の 窝">
<meta property="og:description" content="最好还是用国内服务器拉一次，直连国外到底还是不太行">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://nekoss.top/posts/31992/upload/post_img/ffmpeg.webp">
<meta property="article:published_time" content="2023-05-01T13:42:53.000Z">
<meta property="article:modified_time" content="2024-01-18T09:59:22.946Z">
<meta property="article:author" content="OldcatY">
<meta property="article:tag" content="vps">
<meta property="article:tag" content="ffmpeg">
<meta property="article:tag" content="FluidPlayer">
<meta property="article:tag" content="streamlink">
<meta property="article:tag" content="服务器">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://nekoss.top/posts/31992/upload/post_img/ffmpeg.webp">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" media="all"></script>
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-color-dark.min.css" media="(prefers-color-scheme: dark)"></script>
    <script src="/js/kr-dark.min.js"></script>
  
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" media="all"></script>
  
  <link rel="stylesheet" id="fontawe-css" href="/vendors/font-awesome@4.7.0/css/font-awesome.min.css" media="all"></script>
  <link rel="stylesheet" id="nprogress-css" href="/vendors/nprogress@0.2.0/nprogress.css" media="all"></script>
  
  
  
    <link rel="stylesheet" href="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"></script>
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="/vendors/jquery@3.6.0/dist/jquery.min.js"></script>
  
  
  <style>
    
      .kratos-cover.kratos-cover-2 {
        background-image: url('../images/banner_transparent.png');
      }
    
    
      @media(min-width:768px) {
        body.custom-background {
          background-image: url('https://img.moegirl.org.cn/common/8/8f/Llsif2_unit3.jpg');
        }
      }
    
  </style>
  
<meta name="generator" content="Hexo 7.1.1"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li>
                                            
                                                <a href="/">
                                            
                                                
                                                    <i class="fa fa-home"></i>
                                                
                                                首页
                                            </a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="/archives/">
                                            
                                                
                                                    <i class="fa fa-file"></i>
                                                
                                                归档
                                            </a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a>
                                            
                                                
                                                    <i class="fa fa-folder-open"></i>
                                                
                                                分类
                                            </a>
                                            
                                                <ul class="sub-menu">
                                                    
                                                        <li>
                                                            <a href="/categories/VPS/">
                                                                
                                                                    <i class="fa fa-hdd-o"></i>
                                                                
                                                                VPS
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a href="/categories/%E6%8A%80%E5%B7%A7/">
                                                                
                                                                    <i class="fa fa-lightbulb-o"></i>
                                                                
                                                                技巧
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a href="/categories/%E8%AF%84%E6%B5%8B/">
                                                                
                                                                    <i class="fa fa-info-circle"></i>
                                                                
                                                                评测
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a href="/categories/%E6%97%A5%E5%B8%B8/">
                                                                
                                                                    <i class="fa fa-heart"></i>
                                                                
                                                                日常
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a href="/categories/%E6%8E%A8%E8%8D%90/">
                                                                
                                                                    <i class="fa fa-thumbs-up"></i>
                                                                
                                                                推荐
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a href="/categories/%E8%BD%AC%E8%BD%BD/">
                                                                
                                                                    <i class="fa fa-globe"></i>
                                                                
                                                                转载
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a href="/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/">
                                                                
                                                                    <i class="fa fa-paper-plane-o"></i>
                                                                
                                                                科学上网
                                                            </a>
                                                        </li>
                                                    
                                                </ul>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a>
                                            
                                                
                                                    <i class="fa fa-link"></i>
                                                
                                                外链
                                            </a>
                                            
                                                <ul class="sub-menu">
                                                    
                                                        <li>
                                                            <a target="_blank" rel="noopener" href="https://xlog.laomao.icu">
                                                                
                                                                    <i class="fa fa-bullseye"></i>
                                                                
                                                                xLog博客
                                                            </a>
                                                        </li>
                                                    
                                                        <li>
                                                            <a target="_blank" rel="noopener" href="https://nezha.314520.xyz">
                                                                
                                                                    <i class="fa fa-server"></i>
                                                                
                                                                哪吒探针
                                                            </a>
                                                        </li>
                                                    
                                                </ul>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="/friends/">
                                            
                                                
                                                    <i class="fa fa-user"></i>
                                                
                                                友链
                                            </a>
                                            
                                        </li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">猫 の 窝</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>猫 の 窝</h2> <br />
                        <span>Hexo博客交流同好会</span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <article itemscope itemtype="https://schema.org/Article">
    
    <link itemprop="mainEntityOfPage" href="https://nekoss.top/posts/31992/">
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center" itemprop="name headline">【技巧】利用ffmpeg/Streamlink+Artplayer做拉流中转</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><time datetime="2023-05-01T13:42:53.000Z" itemprop="datePublished"><i class="fa fa-calendar"></i> 2023-05-01</time></li>
                <li itemprop="author" itemscope itemtype="https://schema.org/Person">
                    <i class="fa fa-user"></i> 作者 <span itemprop="name">OldcatY</span>
                </li>
                
                    <li>
                        <i class="fa fa-edit"></i> 
                        
                        
                            ~10.41K
                        
                        字
                    </li>
                
                
            </ul>
        </header>
        <div class="kratos-post-content">
            
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                <div class="icon"><i class="fa fa-warning"></i></div>
                <div class="text"><p>本文最后编辑于 <time datetime="1705571962946"></time> 前，其中的内容可能需要更新。</p></div>
            </div>
            
            
            
                <div class="kratos-post-inner-toc toc-div-class" >
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">搭建环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E6%90%AD%E5%BB%BA"><span class="toc-number">2.</span> <span class="toc-text">正式搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Nginx-%E7%8E%AF%E5%A2%83"><span class="toc-number">2.1.</span> <span class="toc-text">安装 Nginx 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-ffmpeg"><span class="toc-number">2.2.</span> <span class="toc-text">安装 ffmpeg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-Nginx"><span class="toc-number">2.3.</span> <span class="toc-text">配置 Nginx</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-nginxconfig-io-%E7%94%9F%E6%88%90%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.1.</span> <span class="toc-text">使用 nginxconfig.io 生成配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E5%8A%A0%E5%85%A5-nginx-rtmp-%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="toc-number">2.3.2.</span> <span class="toc-text">开始加入 nginx-rtmp 相关参数：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BAdplayer%E6%92%AD%E6%94%BE%E5%99%A8"><span class="toc-number">2.4.</span> <span class="toc-text">搭建dplayer播放器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E7%BD%91%E9%A1%B5%E8%AF%B7%E6%B1%82%E7%9A%84-html%E5%90%8E%E7%BC%80"><span class="toc-number">2.4.1.</span> <span class="toc-text">去除网页请求的.html后缀</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8OBS%E7%AD%89%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%90%AF%E7%9B%B4%E6%92%AD"><span class="toc-number">2.5.</span> <span class="toc-text">使用OBS等软件开启直播</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ffmpeg%E6%8B%89%E6%B5%81%E8%BD%AC%E6%8E%A8"><span class="toc-number">2.6.</span> <span class="toc-text">使用ffmpeg拉流转推</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Streamlink%E6%8B%89%E6%B5%81%E8%BD%AC%E6%8E%A8"><span class="toc-number">2.7.</span> <span class="toc-text">使用Streamlink拉流转推</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Streamlink-%E4%B8%8E-Screen"><span class="toc-number">2.7.1.</span> <span class="toc-text">安装Streamlink 与 Screen</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E6%8E%A8%E6%B5%81%E5%AA%92%E4%BD%93%EF%BC%88%E4%BB%A5YouTube%E7%9B%B4%E6%92%AD%E4%B8%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">2.7.2.</span> <span class="toc-text">转推流媒体（以YouTube直播为例）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8E%A8YouTube-%E9%9D%9E%E5%85%AC%E5%BC%80-Unlisted-%E7%9B%B4%E6%92%AD%E6%B5%81%E3%80%90%E6%B7%A6%E3%80%91"><span class="toc-number">2.8.</span> <span class="toc-text">转推YouTube 非公开(Unlisted)直播流【淦】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Screen"><span class="toc-number">2.8.1.</span> <span class="toc-text">安装Screen</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%B9%B6%E9%83%A8%E7%BD%B2yt-dlp"><span class="toc-number">2.8.2.</span> <span class="toc-text">下载并部署yt-dlp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8Screen%E5%BC%80%E5%90%AF%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C"><span class="toc-number">2.8.3.</span> <span class="toc-text">利用Screen开启后台运行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E6%8E%A8YouTube%E9%9D%9E%E5%85%AC%E5%BC%80%E7%9B%B4%E6%92%AD"><span class="toc-number">2.8.4.</span> <span class="toc-text">转推YouTube非公开直播</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%98%E6%B8%A3%E6%B5%AA"><span class="toc-number">2.9.</span> <span class="toc-text">战渣浪</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%B8%A3%E8%B0%A2"><span class="toc-number">3.</span> <span class="toc-text">鸣谢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-number">3.1.</span> <span class="toc-text">参考链接</span></a></li></ol></li></ol>
                </div>
            
            <hr />
            <div itemprop="articleBody"><h2 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h2><hr>
<blockquote>
<p>本文使用 Ubuntu 22.04 进行搭建<br>本文取消了宝塔面板作为 nginx 控制面板，使用完全命令行方式配置【2023&#x2F;10&#x2F;22更新】</p>
</blockquote>
<h2 id="正式搭建"><a href="#正式搭建" class="headerlink" title="正式搭建"></a>正式搭建</h2><hr>
<h3 id="安装-Nginx-环境"><a href="#安装-Nginx-环境" class="headerlink" title="安装 Nginx 环境"></a>安装 Nginx 环境</h3><ul>
<li><p>添加Ondřej Surý 的 PPA源（Ubuntu）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add-apt-repository ppa:ondrej/nginx-mainline -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 Nginx：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update -y &amp;&amp; apt install nginx-extras -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>确认 Nginx 版本和安装位置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -V</span><br><span class="line">whereis nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 nginx-rtmp-module：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install libnginx-mod-rtmp libnginx-mod-http-lua -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建网站目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /var/www/your.site/hls</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="安装-ffmpeg"><a href="#安装-ffmpeg" class="headerlink" title="安装 ffmpeg"></a>安装 ffmpeg</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get -y install ffmpeg  </span><br></pre></td></tr></table></figure>
<h3 id="配置-Nginx"><a href="#配置-Nginx" class="headerlink" title="配置 Nginx"></a>配置 Nginx</h3><h4 id="使用-nginxconfig-io-生成配置"><a href="#使用-nginxconfig-io-生成配置" class="headerlink" title="使用 nginxconfig.io 生成配置"></a>使用 nginxconfig.io 生成配置</h4><ol>
<li>打开 <a target="_blank" rel="noopener" href="https://nginxconfig.io/">Nginxconfig.io</a> ，使用以下配置：</li>
</ol>
<p><img src="https://gcore.jsdelivr.net/gh/imbalaomao/picx-images-hosting@master/20231022/image.3gyn1mhxx900.webp"></p>
<p><img src="https://gcore.jsdelivr.net/gh/imbalaomao/picx-images-hosting@master/20231022/image.53iupem1l3o0.webp"></p>
<p><img src="https://gcore.jsdelivr.net/gh/imbalaomao/picx-images-hosting@master/20231022/image.6n35dc8g1lo0.webp"></p>
<p><img src="https://gcore.jsdelivr.net/gh/imbalaomao/picx-images-hosting@master/20231022/image.1gqaybcvqvsw.webp"></p>
<ol start="2">
<li><p>接下来根据网站中 <strong>使用配置</strong> 部分的说明进行配置。需要注意：</p>
<blockquote>
<p>在我的服务器这边测试 certbot 始终无法获取证书，经查可能是网站暂时无法访问导致，因此使用 standalone 模式进行申请。申请前需要暂时停止 Nginx 服务，申请成功后再打开。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop nginx</span><br><span class="line">certbot certonly --standalone -d 你的网站 --email 你的邮箱 -w /var/www/_letsencrypt -n --agree-tos --force-renewal</span><br><span class="line">sudo systemctl start nginx</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="开始加入-nginx-rtmp-相关参数："><a href="#开始加入-nginx-rtmp-相关参数：" class="headerlink" title="开始加入 nginx-rtmp 相关参数："></a>开始加入 nginx-rtmp 相关参数：</h4><ol>
<li>打开 <code>/etc/nginx/nginx.conf</code>，在 <code>http</code> 字段前添加如下内容（请记得删除 #与后面的内容）：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">rtmp  &#123;  </span><br><span class="line">    server  &#123;  </span><br><span class="line">        listen 1935;                             ##这是RTMP协议默认端口  </span><br><span class="line">        chunk_size 4096;                         ##数据分块大小  </span><br><span class="line">        application live &#123;                       ##名为live的项目，可随意改变，但需要和网站配置中相同  </span><br><span class="line">            live on;                             ##这是个直播项目  </span><br><span class="line">            hls on;                              ##开启HLS录制  </span><br><span class="line">            wait_key on;                         ##让视频流从一个关键帧开始  </span><br><span class="line">            hls_path /var/www/your.site/hls;     ##HLS录制文件保存的目录，修改&#x27;/var/www/your.site/hls&#x27;为你网站的目录  </span><br><span class="line">            hls_fragment 5s;                     ##HLS生成的每个ts文件的时长  </span><br><span class="line">            hls_playlist_length 30s;             ##每个ts文件的保留时间  </span><br><span class="line">            hls_continuous on;                   ##让HLS标号从上一个结束的位置开始  </span><br><span class="line">            hls_cleanup on;                      ##自动清理过时的ts文件  </span><br><span class="line">            hls_nested on;                       ##为每一个HLS推流项目建立一个新的子目录  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>并按<code>ctrl+s</code>保存，之后输入 <code>sudo nginx -t &amp;&amp; sudo systemctl reload nginx</code> 保存配置</p>
<ol start="2">
<li>修改网站配置</li>
</ol>
<ul>
<li>打开 <code>/etc/nginx/sites-enabled/your.site.conf</code> ，并在开头的  <code>server</code>  字段加入以下内容，示例：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen                  443 ssl http2;</span><br><span class="line">    listen                  [::]:443 ssl http2;</span><br><span class="line">    server_name             example.com;</span><br><span class="line">    root                    /var/www/live/;</span><br><span class="line"></span><br><span class="line">    # SSL</span><br><span class="line">    ssl_certificate         /etc/letsencrypt/live/example.com/fullchain.pem;</span><br><span class="line">    ssl_certificate_key     /etc/letsencrypt/live/example.com/privkey.pem;</span><br><span class="line">    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;</span><br><span class="line"></span><br><span class="line">    # security</span><br><span class="line">    include                 nginxconfig.io/security.conf;</span><br><span class="line"></span><br><span class="line">    # logging</span><br><span class="line">    access_log              /var/log/nginx/access.log combined buffer=512k flush=1m;</span><br><span class="line">    error_log               /var/log/nginx/error.log warn;</span><br><span class="line"></span><br><span class="line">    # additional config</span><br><span class="line">    include                 nginxconfig.io/general.conf;</span><br><span class="line"></span><br><span class="line">    # 需要加入本字段</span><br><span class="line">    location /stream &#123;</span><br><span class="line">       types &#123;</span><br><span class="line">           application/vnd.apple.mpegurl m3u8;</span><br><span class="line">           video/mp2t ts;</span><br><span class="line">       &#125;</span><br><span class="line">       root /var/www/live/hls;</span><br><span class="line">       add_header Cache-Control no-cache;</span><br><span class="line">   &#125;</span><br><span class="line">   # 加入字段到此结束，其余配置不要修改！！！</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># subdomains redirect</span><br><span class="line">server &#123;</span><br><span class="line">    listen                  443 ssl http2;</span><br><span class="line">    listen                  [::]:443 ssl http2;</span><br><span class="line">    server_name             *.example.com;</span><br><span class="line"></span><br><span class="line">    # SSL</span><br><span class="line">    ssl_certificate         /etc/letsencrypt/live/example.com/fullchain.pem;</span><br><span class="line">    ssl_certificate_key     /etc/letsencrypt/live/example.com/privkey.pem;</span><br><span class="line">    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;</span><br><span class="line">    return                  301 https://example.com$request_uri;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># HTTP redirect</span><br><span class="line">server &#123;</span><br><span class="line">    listen      80;</span><br><span class="line">    listen      [::]:80;</span><br><span class="line">    server_name .example.com;</span><br><span class="line">    include     nginxconfig.io/letsencrypt.conf;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        if (!-e $request_filename)&#123;</span><br><span class="line">            rewrite ^(.*)$ /$1.html last;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">        return 301 https://example.com$request_uri;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置好之后，输入 <code>sudo nginx -t &amp;&amp; sudo systemctl reload nginx</code> 应用配置，如果看到 <code>xxxx successful</code> 则表示配置正常且已开始使用。</p>
<h3 id="搭建dplayer播放器"><a href="#搭建dplayer播放器" class="headerlink" title="搭建dplayer播放器"></a>搭建dplayer播放器</h3><p>在 <code>/var/www/your.site</code> （与HLS文件夹同目录）下创建一个html文件，并修改为以下内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>LIVE<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://gcore.jsdelivr.net/gh/imbalaomao/picx-images-hosting@master/image.4akbdjz0ewy0.png&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://gcore.jsdelivr.net/npm/hls.js/dist/hls.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://gcore.jsdelivr.net/npm/artplayer/dist/artplayer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.artplayer-app</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;artplayer-app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> art = <span class="keyword">new</span> <span class="title class_">Artplayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">container</span>: <span class="string">&#x27;.artplayer-app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>: <span class="string">&#x27;/hls/test/index.m3u8&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">volume</span>: <span class="number">0.5</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">autoplay</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">autoSize</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">fullscreen</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">fullscreenWeb</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">isLive</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">customType</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">m3u8</span>: <span class="keyword">function</span> <span class="title function_">playM3u8</span>(<span class="params">video, url, art</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (<span class="title class_">Hls</span>.<span class="title function_">isSupported</span>()) &#123;</span></span><br><span class="line"><span class="language-javascript">        				<span class="keyword">if</span> (art.<span class="property">hls</span>) art.<span class="property">hls</span>.<span class="title function_">destroy</span>();</span></span><br><span class="line"><span class="language-javascript">        				<span class="keyword">const</span> hls = <span class="keyword">new</span> <span class="title class_">Hls</span>();</span></span><br><span class="line"><span class="language-javascript">        				hls.<span class="title function_">loadSource</span>(url);</span></span><br><span class="line"><span class="language-javascript">        				hls.<span class="title function_">attachMedia</span>(video);</span></span><br><span class="line"><span class="language-javascript">        				art.<span class="property">hls</span> = hls;</span></span><br><span class="line"><span class="language-javascript">        				art.<span class="title function_">on</span>(<span class="string">&#x27;destroy&#x27;</span>, <span class="function">() =&gt;</span> hls.<span class="title function_">destroy</span>());</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (video.<span class="title function_">canPlayType</span>(<span class="string">&#x27;application/vnd.apple.mpegurl&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        video.<span class="property">src</span> = url;</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        art.<span class="property">notice</span>.<span class="property">show</span> = <span class="string">&#x27;Unsupported playback format: m3u8&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="去除网页请求的-html后缀"><a href="#去除网页请求的-html后缀" class="headerlink" title="去除网页请求的.html后缀"></a>去除网页请求的.html后缀</h4><p>在 <code>/etc/nginx/nginxconfig.io/general.conf</code> 中加入如下重写字段：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location ^~ / &#123;  </span><br><span class="line">    if (!-e $request_filename)&#123; </span><br><span class="line">        rewrite ^(.*)$ /$1.html last;</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">    try_files $uri $uri/ =404;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>保存后输入 <code>sudo nginx -t &amp;&amp; sudo systemctl reload nginx</code> 应用配置即可</p>
<h3 id="使用OBS等软件开启直播"><a href="#使用OBS等软件开启直播" class="headerlink" title="使用OBS等软件开启直播"></a>使用OBS等软件开启直播</h3><p><img src="https://gcore.jsdelivr.net/gh/imbalaomao/picx-images-hosting@master/20230628/%E5%9B%BE%E7%89%87.75bwjkmq756o.webp" alt="image"><br><strong>设置如下：</strong></p>
<ul>
<li>服务器：<code>rtmp://你的服务器地址:1935/live/</code></li>
<li>串流密钥：<code>随意设置，但应与HTML代码中的推流码一致</code></li>
</ul>
<h3 id="使用ffmpeg拉流转推"><a href="#使用ffmpeg拉流转推" class="headerlink" title="使用ffmpeg拉流转推"></a>使用ffmpeg拉流转推</h3><p><strong>大致命令如下：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i 拉流地址 -c:v copy -c:a aac -b:a 192k -strict -2 -f flv rtmp://127.0.0.1:1935/live/推流码  </span><br></pre></td></tr></table></figure>
<p><strong>如果需要后台运行</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ffmpeg -i 拉流地址 -c:v copy -c:a aac -b:a 192k -strict -2 -f flv rtmp://127.0.0.1:1935/live/推流码 &amp;  </span><br></pre></td></tr></table></figure>
<h3 id="使用Streamlink拉流转推"><a href="#使用Streamlink拉流转推" class="headerlink" title="使用Streamlink拉流转推"></a>使用Streamlink拉流转推</h3><h4 id="安装Streamlink-与-Screen"><a href="#安装Streamlink-与-Screen" class="headerlink" title="安装Streamlink 与 Screen"></a>安装Streamlink 与 Screen</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python3-pip screen  </span><br><span class="line">pip3 install streamlink  </span><br></pre></td></tr></table></figure>
<h4 id="转推流媒体（以YouTube直播为例）"><a href="#转推流媒体（以YouTube直播为例）" class="headerlink" title="转推流媒体（以YouTube直播为例）"></a>转推流媒体（以YouTube直播为例）</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;Please input the youtube url:&quot;  </span><br><span class="line">read URL  </span><br><span class="line">streamlink $URL best -O | ffmpeg -re -i pipe:0 -c copy -bsf:a aac_adtstoasc -f flv rtmp://localhost:1935/live/youtube  </span><br></pre></td></tr></table></figure>
<h3 id="转推YouTube-非公开-Unlisted-直播流【淦】"><a href="#转推YouTube-非公开-Unlisted-直播流【淦】" class="headerlink" title="转推YouTube 非公开(Unlisted)直播流【淦】"></a>转推YouTube 非公开(Unlisted)直播流【淦】</h3><p><em><strong>这个玩意真的折腾死我了，公开直播的转推似乎真的非常简单，而Unlisted直播由于受到保护，Streamlink无法转推，因此进行了一波取巧操作。</strong></em></p>
<p>这种转推的前提是你要知道直播流的地址，如<code>https://youtu.be/abcdefg</code></p>
<h4 id="安装Screen"><a href="#安装Screen" class="headerlink" title="安装Screen"></a>安装Screen</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt -y install screen  </span><br></pre></td></tr></table></figure>
<p>我对于后台运行只会screen……我菜鸡我……</p>
<h4 id="下载并部署yt-dlp"><a href="#下载并部署yt-dlp" class="headerlink" title="下载并部署yt-dlp"></a>下载并部署yt-dlp</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O /usr/local/bin/yt-dlp https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp  </span><br></pre></td></tr></table></figure>
<h4 id="利用Screen开启后台运行"><a href="#利用Screen开启后台运行" class="headerlink" title="利用Screen开启后台运行"></a>利用Screen开启后台运行</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -S youtube  </span><br></pre></td></tr></table></figure>
<h4 id="转推YouTube非公开直播"><a href="#转推YouTube非公开直播" class="headerlink" title="转推YouTube非公开直播"></a>转推YouTube非公开直播</h4><p><em><strong>为了这个东西折腾死我了……</strong></em></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">clear  </span><br><span class="line">echo &quot;Please input the YouTube url:&quot;  </span><br><span class="line">read URL  </span><br><span class="line">ffmpeg -re -i $(yt-dlp -f best -g $URL) -c copy -bsf:a aac_adtstoasc -f flv -buffer_size 256M rtmp://localhost/live/youtube  </span><br></pre></td></tr></table></figure>
<p>这里是利用 <strong>yt-dlp</strong> 将YouTube直播链接解析为m3u8链接并传递给ffmpeg读取，且<code>buffer_size</code>设置较小似乎会报错（我也不知道为什么，反正调大就对了）。</p>
<h3 id="战渣浪"><a href="#战渣浪" class="headerlink" title="战渣浪"></a>战渣浪</h3><ul>
<li><p>在<a target="_blank" rel="noopener" href="https://me.weibo.com/content/live">微博直播后台</a>开播</p>
</li>
<li><p>使用以下代码转推流媒体</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">clear</span><br><span class="line">read -p &quot;Enter the original file address: &quot; URL</span><br><span class="line">echo &quot;&quot;</span><br><span class="line">read -p &quot;Enter Weibo stream link: &quot; LINK</span><br><span class="line">streamlink $URL best -O | ffmpeg -re -i pipe:0 -c copy -f flv $LINK</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用以下代码在网页中调用微博直播流</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>LIVE<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://gcore.jsdelivr.net/gh/imbalaomao/picx-images-hosting@master/image.4akbdjz0ewy0.png&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/hls.js/1.1.5/hls.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://gcore.jsdelivr.net/npm/artplayer/dist/artplayer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/flv.js/1.6.2/flv.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.artplayer-app</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;artplayer-app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">playFlv</span>(<span class="params">video, url, art</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (flvjs.<span class="title function_">isSupported</span>()) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (art.<span class="property">flv</span>) art.<span class="property">flv</span>.<span class="title function_">destroy</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> flv = flvjs.<span class="title function_">createPlayer</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;flv&#x27;</span>, url &#125;);</span></span><br><span class="line"><span class="language-javascript">                flv.<span class="title function_">attachMediaElement</span>(video);</span></span><br><span class="line"><span class="language-javascript">                flv.<span class="title function_">load</span>();</span></span><br><span class="line"><span class="language-javascript">                art.<span class="property">flv</span> = flv; </span></span><br><span class="line"><span class="language-javascript">                art.<span class="title function_">on</span>(<span class="string">&#x27;destroy&#x27;</span>, <span class="function">() =&gt;</span> flv.<span class="title function_">destroy</span>());</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                art.<span class="property">notice</span>.<span class="property">show</span> = <span class="string">&#x27;Unsupported playback format: flv&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> art = <span class="keyword">new</span> <span class="title class_">Artplayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">container</span>: <span class="string">&#x27;.artplayer-app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>: <span class="string">&#x27;微博直播地址&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&#x27;flv&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">isLive</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">autoplay</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">volume</span>: <span class="number">0.5</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">poster</span>: <span class="string">&#x27;https://gcore.jsdelivr.net/gh/imbalaomao/picx-images-hosting@master/13人.6627l1ukmpg0.webp&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">customType</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">flv</span>: playFlv,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        art.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">info</span>(art.<span class="property">flv</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="鸣谢"><a href="#鸣谢" class="headerlink" title="鸣谢"></a>鸣谢</h2><p><strong>感谢 yt-dlp、Streamlink、ffmpeg作者，没有他们就没有此篇教程。</strong></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.wevg.org/archives/nginx-mutli-rtmp/">Vigorous Pro —— 使用 Nginx 多平台同步直播</a></li>
<li><a target="_blank" rel="noopener" href="https://candinya.com/posts/build-a-rtmp-hls-stream-server/">糖菓·部落 —— 搭建自己的RTMP+HLS直播服务器</a></li>
<li><a target="_blank" rel="noopener" href="https://www.alittlefatdog.com/2022/07/29/%E3%80%90%E5%8E%9F%E5%88%9B%E3%80%91%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%88%A9%E7%94%A8ffmpeg%E5%92%8Cyt-dlp%E4%BB%8Eyoutube%E7%88%AC%E5%8F%96%E7%9B%B4%E6%92%AD%E6%B5%81%E7%9A%84%E7%BB%8F%E8%BF%87/">灬小肥狗之家灬 ——【原创】记一次利用FFmpeg和yt-dlp从YouTube爬取直播流的经过</a></li>
</ul>
</div>
        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5 itemprop="copyrightNotice">本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    <a class="tag-none-link" href="/tags/FluidPlayer/" rel="tag">FluidPlayer</a>, <a class="tag-none-link" href="/tags/ffmpeg/" rel="tag">ffmpeg</a>, <a class="tag-none-link" href="/tags/streamlink/" rel="tag">streamlink</a>, <a class="tag-none-link" href="/tags/vps/" rel="tag">vps</a>, <a class="tag-none-link" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">服务器</a>
                </div>
                <div class="pull-date">
                    <time datetime="2024-01-18T09:59:22.946Z" itemprop="dateModified">最后编辑：2024-01-18</time>
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" 【日常】2023年4月新番初观感（主观）" href="/posts/51318/">&lt; 上一篇</a>
            </div>
            
            
            <div class="nav-next clearfix">
                <a title=" 【技巧】如何在Windows 10中安装Apple Music Preview" href="/posts/38965/">下一篇 &gt;</a>
            </div>
            
        </nav>
    
    
</article>

        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="https://jsd.cdn.zzko.cn/gh/imbalaomao/picx-images-hosting@master/touxiang.4aye9nuxxos0.webp" loading="lazy" decoding="auto" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"></p>
    </div>
    <div class="site-meta">
        <a class="meta-item" href="/archives/">
            <span class="title">
                文章
            </span>
            <span class="count">
                72
            </span>
        </a>
        <a class="meta-item" href="/categories/">
            <span class="title">
                分类
            </span>
            <span class="count">
                7
            </span>
        </a>
        <a class="meta-item" href="/tags/">
            <span class="title">
                标签
            </span>
            <span class="count">
                65
            </span>
        </a>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                    <aside id="krw-toc" class="widget widget-kratos-toc clearfix toc-div-class" >
    <div class="photo-background"></div>
    <h4 class="widget-title no-after">
        <i class="fa fa-compass"></i>
        文章目录
        <span class="toc-progress-bar" role="progressbar" aria-label="阅读进度："></span>
    </h4>
    <div class="textwidget">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-text">搭建环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E6%90%AD%E5%BB%BA"><span class="toc-text">正式搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Nginx-%E7%8E%AF%E5%A2%83"><span class="toc-text">安装 Nginx 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-ffmpeg"><span class="toc-text">安装 ffmpeg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-Nginx"><span class="toc-text">配置 Nginx</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-nginxconfig-io-%E7%94%9F%E6%88%90%E9%85%8D%E7%BD%AE"><span class="toc-text">使用 nginxconfig.io 生成配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E5%8A%A0%E5%85%A5-nginx-rtmp-%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="toc-text">开始加入 nginx-rtmp 相关参数：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BAdplayer%E6%92%AD%E6%94%BE%E5%99%A8"><span class="toc-text">搭建dplayer播放器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E7%BD%91%E9%A1%B5%E8%AF%B7%E6%B1%82%E7%9A%84-html%E5%90%8E%E7%BC%80"><span class="toc-text">去除网页请求的.html后缀</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8OBS%E7%AD%89%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%90%AF%E7%9B%B4%E6%92%AD"><span class="toc-text">使用OBS等软件开启直播</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ffmpeg%E6%8B%89%E6%B5%81%E8%BD%AC%E6%8E%A8"><span class="toc-text">使用ffmpeg拉流转推</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Streamlink%E6%8B%89%E6%B5%81%E8%BD%AC%E6%8E%A8"><span class="toc-text">使用Streamlink拉流转推</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Streamlink-%E4%B8%8E-Screen"><span class="toc-text">安装Streamlink 与 Screen</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E6%8E%A8%E6%B5%81%E5%AA%92%E4%BD%93%EF%BC%88%E4%BB%A5YouTube%E7%9B%B4%E6%92%AD%E4%B8%BA%E4%BE%8B%EF%BC%89"><span class="toc-text">转推流媒体（以YouTube直播为例）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8E%A8YouTube-%E9%9D%9E%E5%85%AC%E5%BC%80-Unlisted-%E7%9B%B4%E6%92%AD%E6%B5%81%E3%80%90%E6%B7%A6%E3%80%91"><span class="toc-text">转推YouTube 非公开(Unlisted)直播流【淦】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Screen"><span class="toc-text">安装Screen</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%B9%B6%E9%83%A8%E7%BD%B2yt-dlp"><span class="toc-text">下载并部署yt-dlp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8Screen%E5%BC%80%E5%90%AF%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C"><span class="toc-text">利用Screen开启后台运行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E6%8E%A8YouTube%E9%9D%9E%E5%85%AC%E5%BC%80%E7%9B%B4%E6%92%AD"><span class="toc-text">转推YouTube非公开直播</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%98%E6%B8%A3%E6%B5%AA"><span class="toc-text">战渣浪</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%B8%A3%E8%B0%A2"><span class="toc-text">鸣谢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-text">参考链接</span></a></li></ol></li></ol>
    </div>
</aside>
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分类目录</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/VPS/">VPS</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E5%B7%A7/">技巧</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8E%A8%E8%8D%90/">推荐</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%B8%B8/">日常</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/">科学上网</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%84%E6%B5%8B/">评测</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AC%E8%BD%BD/">转载</a><span class="category-list-count">4</span></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>标签聚合</h4>
      <div class="tag-clouds">
        <a href="/tags/Alist/" style="font-size: 0.6em;">Alist</a> <a href="/tags/Apple-Music/" style="font-size: 0.6em;">Apple Music</a> <a href="/tags/BT/" style="font-size: 0.6em;">BT</a> <a href="/tags/Clash/" style="font-size: 0.73em;">Clash</a> <a href="/tags/EPIC/" style="font-size: 0.6em;">EPIC</a> <a href="/tags/Edge/" style="font-size: 0.67em;">Edge</a> <a href="/tags/FluidPlayer/" style="font-size: 0.6em;">FluidPlayer</a> <a href="/tags/IDM/" style="font-size: 0.6em;">IDM</a> <a href="/tags/MIUI/" style="font-size: 0.6em;">MIUI</a> <a href="/tags/Pikpak/" style="font-size: 0.6em;">Pikpak</a> <a href="/tags/Steam/" style="font-size: 0.6em;">Steam</a> <a href="/tags/Windows/" style="font-size: 0.8em;">Windows</a> <a href="/tags/aws/" style="font-size: 0.6em;">aws</a> <a href="/tags/bilix/" style="font-size: 0.6em;">bilix</a> <a href="/tags/emby/" style="font-size: 0.6em;">emby</a> <a href="/tags/ffmpeg/" style="font-size: 0.67em;">ffmpeg</a> <a href="/tags/film-riot/" style="font-size: 0.6em;">film riot</a> <a href="/tags/hexo/" style="font-size: 0.6em;">hexo</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/posts/4cc3b6e9/"><i class="fa  fa-book"></i> 【日常】2024年1月追番列表</a>
            
          
        
          
          
            <a class="list-group-item" href="/posts/82f2c97d/"><i class="fa  fa-book"></i> 【技巧】搭建一个自己的deepl翻译</a>
            
          
        
          
          
            <a class="list-group-item" href="/posts/f2a71413/"><i class="fa  fa-book"></i> 【小鸡测评】Netcup VPS piko G11S测评</a>
            
          
        
          
          
            <a class="list-group-item" href="/posts/892d5ece/"><i class="fa  fa-book"></i> 【日常】2023年10月追番感想</a>
            
          
        
          
          
            <a class="list-group-item" href="/posts/33551e6f/"><i class="fa  fa-book"></i> 【科学上网】在Clash Verge中达成Clash for Windows的Parsers功能</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  >
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <!-- Keep for compatibility -->
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <!-- New links -->
                        
                            <li>
                                <a target="_blank" rel="nofollow" href="https://weibo.com/pamire">
                                    
                                        <i class="fa fa-weibo"></i>
                                    
                                </a>
                            </li>
                        
                            <li>
                                <a target="_blank" rel="nofollow" href="https://twitter.com/oldcatY_meng">
                                    
                                        <i class="fa fa-twitter"></i>
                                    
                                </a>
                            </li>
                        
                            <li>
                                <a target="_blank" rel="nofollow" href="https://steamcommunity.com/id/loveinwind">
                                    
                                        <i class="fa fa-steam"></i>
                                    
                                </a>
                            </li>
                        
                            <li>
                                <a target="_blank" rel="nofollow" href="https://github.com/imbalaomao">
                                    
                                        <i class="fa fa-github"></i>
                                    
                                </a>
                            </li>
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2024 猫 の 窝 版权所有.</li>
                            <li>本站已在风雨中艰难运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by OldcatY.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            <li><a href="https://beian.miit.gov.cn" rel="external nofollow" target="_blank"><a href="https://icp.gov.moe/?keyword=20240422" target="_blank">萌ICP备20240422号</a></a></li>
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
                    <div class="box theme-box" id="snow-switch">
                        <span class="fa fa-snowflake-o"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="/vendors/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="/vendors/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>

    <div>
        <canvas id="snow"></canvas>
        <script async src="/js/snow.min.js"></script>
    </div>


    <script async src="/js/candy.min.js"></script>




    <script defer src="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>